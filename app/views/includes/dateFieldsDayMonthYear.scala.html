@import models._
@import play.api.data._
@import play.api.data.Forms._
@import _root_.template.Helper._

@(theForm:Form[_],hidden:String, prefix:String, help: Boolean, helpText: String, inline: Boolean, suffix: String = "")(implicit requestHeader: RequestHeader,  lang: Lang)


@displayFieldError(message: String, args: Seq[Any]) = {
	<p class="error">@Messages(message, args:_*)</p>
}

@errorWrapper(fields:Seq[Field],id: String,classes:String*)(content:Html) = {
	@defining(_root_.template.HtmlSupport.getErrors(fields)){ combinedErrors =>

	  <div id="@id" class='@classes.mkString(" ") @if(combinedErrors.isEmpty==false){ form-grouped-error }'>
	    @if(combinedErrors.isEmpty==false){

			@combinedErrors.map(err => (err.message, err.args)).distinct.map { case (msg, args) => @displayFieldError(msg, args) }
	    
	    }
	@content
		</div>
	}
}


	<fieldset class="form-group @hidden @if(inline == true){ fieldset-inline }">
	<legend class="form-label-bold">@if(suffix.nonEmpty) { @Messages(s"label.$prefix.$suffix") } else { @Messages(s"label.$prefix") }</legend>
	    @errorWrapper(Seq(theForm(""+prefix+".month"),theForm(""+prefix+".year"),theForm(prefix)),prefix,"form-date-dayMonth"){
	    
	    @if(help == true){
	    	<p class="form-hint">@helpText</p>
	    }
	    <p class="form-hint">@Messages("help.date.day.month.year")</p>
	      @helpers.inputText(
	        field = theForm(""+prefix+".day"),
	        '_label -> Messages("label.date.day"),
	        '_error -> theForm(""+prefix+".date.day").error,
	        '_labelClass -> "form-label",
	        '_showConstraints -> false, '_showErrors -> false,
	        'class -> "form-control",
	        '_fieldsetClass -> (hidden+ " form-group-day"),
	        Symbol("maxLength") -> "2"
	      )

	      @helpers.inputText(
	        field = theForm(""+prefix+".month"),
	        '_label -> Messages("label.date.month"),
	        '_error -> theForm(""+prefix+".date.month").error,
	        '_labelClass -> "form-label",
	        '_showConstraints -> false, '_showErrors -> false,
	        'class -> "form-control",
	        '_fieldsetClass -> (hidden+ " form-group-month"),
	        Symbol("maxLength") -> "2"
	      )

	      @helpers.inputText(
	        field = theForm(""+prefix+".year"),
	        '_label -> Messages("label.date.year"),
	        '_error -> theForm(""+prefix+".date.year").error,
	        '_labelClass -> "form-label",
	        '_showConstraints -> false, '_showErrors -> false,
	        'class -> "form-control",
	        '_fieldsetClass ->  (hidden+ " form-group-year"),
	        Symbol("maxLength") -> "4"
	      )
	  }
	</fieldset>