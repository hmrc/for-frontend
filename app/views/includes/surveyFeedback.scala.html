@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import models._
@import models.pages.Summary
@import play.api.data._
@import uk.gov.hmrc.govukfrontend.views.html.components._
@import uk.gov.hmrc.govukfrontend.views.html.components.implicits._

@(  summary: Summary,
    theForm: Form[_],
    govukButton: GovukButton,
    govukTextarea: GovukTextarea,
    govukRadios: GovukRadios,
    formWithCSFR:FormWithCSRF)(implicit requestHeader: Request[_], messages: Messages)



        <h1 class="govuk-heading-l">@messages("label.feedback.headingAfterSubmitting")</h1>

        @formWithCSFR(
            action = feedback.routes.SurveyController.formCompleteFeedback,
            args = 'class -> "satisfactionSurvey", 'id -> "myFormId"

        ) {


        <input type="hidden" id="journey" name="journey" value="@theForm("journey").value.getOrElse("")"/>

            @govukRadios(
                Radios(
                    name = "satisfaction",
                    idPrefix = Option("satisfaction"),
                    items = EnumOptions.options(SatisfactionTypes).map(radioItem => {
                        RadioItem(
                            content = Text(radioItem._2),
                            checked = radioItem._1.equals(theForm("satisfaction").value.getOrElse("")),
                            value = Option(radioItem._1)
                        )
                    }
                    ),
                    errorMessage = theForm.errors.asTextErrorMessageForField("satisfaction"),
                    fieldset = Option(
                        Fieldset(
                            legend = Option(
                                Legend(
                                    content = Text(messages("label.satisfactionSurvey")),
                                    classes = "govuk-!-font-weight-bold"
                                )
                            )
                        )
                    )
                )
            )

            @govukTextarea(
                Textarea(
                    id = "details",
                    name = "details",
                    value = theForm("details").value,
                    rows = 8,
                    errorMessage = theForm.errors.asTextErrorMessageForField("details"),
                    label = Label(
                        classes = "govuk-!-font-weight-bold",
                        content = Text(messages("label.satisfactionSurveyComments"))
                    ),
                    hint = Hint(content = Text(messages("text.survey.bottomImprove") + messages("text.survey.bottomCopy")))

                )
            )

           @includes.continueButton(govukButton)
        }

