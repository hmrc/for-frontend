@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import helpers.summary._
@import java.text.NumberFormat
@import models._
@import models.pages._
@import models.serviceContracts.submissions._

@(p12: PageTwelve)(implicit requestHeader: RequestHeader,  messages: Messages)
<li><h2 class="heading-medium no-margin-top">@Messages("section12.heading")</h2></li>

@summaryBlock(Messages("label.responsibleOutsideRepairs"), 12, "responsibleOutsideRepairs") {
    @Messages(s"responsibleType.${p12.responsibleOutsideRepairs.name}")

}
@summaryBlock(Messages("label.responsibleInsideRepairs"), 12, "responsibleInsideRepairs") {
    @Messages(s"responsibleType.${p12.responsibleInsideRepairs.name}")
}
@summaryBlock(Messages("label.responsibleBuildingInsurance"), 12, "responsibleBuildingInsurance") {
    @Messages(s"responsibleType.${p12.responsibleBuildingInsurance.name}")   
}
@summaryBlock(Messages("label.ndrCharges"), 12, "ndrCharges") {
    @displayBoolean(p12.ndrCharges, "7")
}
@if(p12.ndrCharges) {
    @p12.ndrDetails.map { ndrSpecifics =>

        @summaryBlock(Messages("label.ndrDetails"), 12, "ndrDetails") {
            @(s"£${NumberFormat.getNumberInstance().format(ndrSpecifics)} ")
        }
    }
}

@summaryBlock(Messages("label.waterCharges"), 12, "waterCharges") {
    @displayBoolean(p12.waterCharges, "7")
}
@if(p12.waterCharges) {
    @summaryBlock(Messages("label.ndrDetails"), 12, "waterChargesCost") {
        @(s"£${NumberFormat.getNumberInstance().format(p12.waterChargesCost.getOrElse(""))} ")
    }
}

@summaryBlock(Messages("label.includedServices"), 12, "includedServices") {
    @displayBoolean(p12.includedServices, "2")
}
@if(p12.includedServices) {
    @p12.includedServicesDetails.zipWithIndex.map { case (serviceDetails, idx) =>
        @summaryBlock(s"${idx+1}. " + Messages("label.includedServicesDetails.chargeDescription"), 12, s"includedServicesDetails_${idx}_chargeDescription_text") {
            @serviceDetails.chargeDescription
            <br/>
            @(s"£${NumberFormat.getNumberInstance().format(serviceDetails.chargeCost)}")
        }

    }
}