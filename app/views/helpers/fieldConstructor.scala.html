@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@***********************************

Example usage:

'_help -> "Custom help",                        (shows help text)
'_labelClass -> "form-label-bold",              (extra class for labels)
'_legend -> true,                               (shows legend/label)
'_optional -> true,                             (shows optional/required for screen readers - deprecated)
'_helpIndent -> "help text",                    (shows helptext with indent class)
'_pound -> true,                                (shows pound sign on inputs)
'_add' -> true,                                 (shows add/remove links)
'_details -> true,                              (shows details element)
'_detailsQuestion -> "The question",            (details element question text)
'_detailsAnswer -> "The answer",                (details element answer text)
'_characterCount -> "250",                      (character limit)
'_nojsText -> "no js text",                     (shows no js text)
'_hint -> "Custom hint"                         (shows hint text, similar to help, just rendered separately)

***********************************@

@import views.html.helper._
@import util.FieldElementsHelper._

@(elements: helper.FieldElements)(implicit messages: Messages)

    @elements.args.get('_legend) match {
     	case Some(true) => { 
     		<fieldset id="@elements.id" class="@elements.args.get('_fieldsetClass) form-group @if(elements.hasErrors) {has-error}">
   				<legend class="@elements.args.get('_labelClass)"><span class="label-span">@elements.raldLabel</span>

                    @elements.args.get('_optional) match {
                        case Some(true) => { <span class="visuallyhidden">(@Messages("label.optional"))</span> }
                        case _ => { }
                    }

                    @elements.args.get('_help).map { helpText =>
                    <span class="form-hint">@helpText</span>
                    }

                </legend> 
   		}
		case _ => { 
			<div id="@elements.id" class="@elements.args.get('_fieldsetClass) form-group @if(elements.hasErrors) {has-error}">
				<label class="@elements.args.get('_labelClass)" for="@(elements.id)_text" ><span class="label-span">@elements.label</span>

                    @elements.args.get('_optional) match {
                        case Some(true) => { <span class="visuallyhidden">(@Messages("label.optional"))</span> }
                        case _ => { }
                    }

                    @elements.args.get('_help).map { helpText =>
                        <span class="form-hint">@helpText</span>
                    }
                </label> 
		}
    }

    @elements.args.get('_nojsText).map { nojsText => 
            <p class="hidden">@nojsText</p>
    }


    @elements.args.get('_helpIndent).map { helpText =>
                <p class="notice">
                    <i class="icon icon-important">
                        <span class="visually-hidden">Warning</span>
                    </i>
                    <strong class="bold-small">
                        @helpText
                    </strong>
                </p>
    }
    @elements.args.get('_details) match {
        case Some(true) => { 
            <details>
                <summary><span>@elements.args.get('_detailsQuestion).map{detailsQuestion=>@detailsQuestion}</span></summary>
                <div class="panel-indent">
                  @elements.args.get('_detailsAnswer).map { detailsAnswer => @detailsAnswer }
                </div>
            </details>
        }
        case _ => {}
    }

    @if(elements.hasErrors) {
    	<div class="@if(elements.hasErrors) {govuk-form-group--error}">
    		<p class="error">@elements.errors.mkString(", ")</p>
    }

    @elements.args.get('_hint).map { hintText =>
        <span class="form-hint">@hintText</span>
    }

    @elements.args.get('_pound) match {
        case Some(true) => { <span class="pound">Â£</span> }
        case _ => {}
    }

    @elements.input

    @elements.args.get('_characterCount).map { characterCount => 

        <div class="charCount hide-if-no-js">@Html(Messages("copy.character.count", characterCount))</div>
        <div class="charCount-no-js hidden">@Html(Messages("copy.character.count.nojs", characterCount))</div>

    }

	@if(elements.hasErrors) {
    	</div>
	}

    @elements.args.get('_add) match {
        case Some(true) => { 
            <a href="#" class="remove" role="button" style="display:none">@Messages("label.add.remove")</a>
            <a href="#" class="add" role="button" >@Messages("label.add.individual")</a> 
        }
        case _ => {}
    }



	@elements.args.get('_legend) match {
     	case Some(true) => { </fieldset> }
		case _ => { </div> }
    }



